# Upgrade to Python 3.14 and remove vendored tomli

Date: 2026-02-15

## Status

Accepted. Supersedes
[2026-02-14-01 Python 3.8 with vendored tomli](2026-02-14-01-python-38-vendored-tomli.md).

## Context

The NAS constraint that required Python 3.8 was re-evaluated. The orchestrator
runs on the development machine (macOS) and the NAS has Python available via
DSM's package manager — the pinned version can be updated. Staying on 3.8 meant
carrying vendored tomli, using legacy typing syntax, and missing six years of
language improvements.

## Decision

Target Python 3.14.2. Remove vendored `tomli` — use `tomllib` from the standard
library. Drop `from __future__ import annotations` (PEP 749 makes deferred
evaluation native in 3.14). Use builtin generics (`dict`, `list`) and union
syntax (`X | None`) directly.

## Consequences

- ~1,150 lines of vendored code removed.
- Modern typing syntax is cleaner and doesn't require future imports.
- `tomllib` is maintained as part of CPython — no vendoring or update burden.
- Requires Python 3.14+ on any machine running the orchestrator. The NAS must
  have a sufficiently recent Python installed.
- Pyright target set to 3.14 for accurate type checking.
